<!-- Because directives can't be applied conditionally (routerLink, mat-button and mat-icon-button), we have to use different elements -->

<!-- Edge case of a button without any kind of link at all -->
@if (type === 'none') {
    <span>
        @if (icon) {
            <mat-icon [naturalIcon]="icon" />
        }
        @if (label) {
            <span>{{ label }}</span>
        }
    </span>
}

@if (!raised) {
    <!-- App routed link with label... -->
    @if (type === 'routerLink' && label) {
        <a
            mat-button
            [color]="color"
            [queryParams]="queryParams"
            [queryParamsHandling]="queryParamsHandling"
            [routerLink]="navigate"
            [fragment]="fragment"
            [preserveFragment]="preserveFragment"
            [disabled]="disabled"
        >
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
            <span>{{ label }}</span>
        </a>
    }
    <!-- ... and without label -->
    @if (type === 'routerLink' && !label) {
        <a
            mat-icon-button
            [color]="color"
            [queryParams]="queryParams"
            [queryParamsHandling]="queryParamsHandling"
            [routerLink]="navigate"
            [fragment]="fragment"
            [preserveFragment]="preserveFragment"
            [disabled]="disabled"
        >
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
        </a>
    }
    <!-- Click with label... -->
    @if (type === 'click' && label) {
        <a mat-button [color]="color" [disabled]="disabled" (click)="buttonClick$.next($event)">
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
            <span>{{ label }}</span>
        </a>
    }
    <!-- ... and without label -->
    @if (type === 'click' && !label) {
        <a mat-icon-button [disabled]="disabled" (click)="buttonClick$.next($event)">
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
        </a>
    }
    <!-- External link with label... -->
    @if (type === 'href' && label) {
        <a mat-button target="_blank" [attr.href]="href" [color]="color" [disabled]="disabled">
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
            <span>{{ label }}</span>
        </a>
    }
    <!-- ... and without label -->
    @if (type === 'href' && !label) {
        <a mat-icon-button target="_blank" [attr.href]="href" [color]="color" [disabled]="disabled">
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
        </a>
    }
}

@if (raised) {
    <!-- App routed link with label... -->
    @if (type === 'routerLink' && label) {
        <a
            mat-raised-button
            [color]="color"
            [queryParams]="queryParams"
            [queryParamsHandling]="queryParamsHandling"
            [routerLink]="navigate"
            [fragment]="fragment"
            [preserveFragment]="preserveFragment"
            [disabled]="disabled"
        >
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
            <span>{{ label }}</span>
        </a>
    }
    <!-- ... and without label -->
    @if (type === 'routerLink' && !label) {
        <a
            mat-icon-button
            class="mat-elevation-z4"
            [color]="color"
            [queryParams]="queryParams"
            [queryParamsHandling]="queryParamsHandling"
            [routerLink]="navigate"
            [fragment]="fragment"
            [preserveFragment]="preserveFragment"
            [disabled]="disabled"
        >
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
        </a>
    }
    <!-- Click with label... -->
    @if (type === 'click' && label) {
        <a mat-raised-button [color]="color" [disabled]="disabled" (click)="buttonClick$.next($event)">
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
            <span>{{ label }}</span>
        </a>
    }
    <!-- ... and without label -->
    @if (type === 'click' && !label) {
        <a
            mat-icon-button
            class="mat-elevation-z4"
            [color]="color"
            [disabled]="disabled"
            (click)="buttonClick$.next($event)"
        >
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
        </a>
    }
    <!-- External link with label... -->
    @if (type === 'href' && label) {
        <a mat-raised-button target="_blank" [attr.href]="href" [color]="color" [disabled]="disabled">
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
            <span>{{ label }}</span>
        </a>
    }
    <!-- ... and without label -->
    @if (type === 'href' && !label) {
        <a
            mat-icon-button
            class="mat-elevation-z4"
            target="_blank"
            [attr.href]="href"
            [color]="color"
            [disabled]="disabled"
        >
            @if (icon) {
                <mat-icon [naturalIcon]="icon" />
            }
        </a>
    }
}
