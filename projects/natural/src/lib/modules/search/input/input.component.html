<mat-form-field #field matRipple>

    <mat-label *ngIf="configuration">{{ configuration.display }}</mat-label>
    <mat-label *ngIf="!configuration">{{ placeholder }}</mat-label>

    <input #input
           matInput
           type="text"
           [formControl]="formCtrl"
           [readonly]="isDropdown() && selection || isFlag()"
           (blur)="search()"
           (keydown.enter)="search()"
           [errorStateMatcher]="errorMatcher"
           [attr.size]="length"
           autocomplete="off"
    >

    <!-- TODO : replace this void button -->
    <div class="search-icon" matPrefix *ngIf="!configuration && !selection">
        <natural-icon name="search"></natural-icon>
    </div>

    <button mat-icon-button matSuffix (click)="clear()" *ngIf="selection">
        <natural-icon name="close"></natural-icon>
    </button>

    <button mat-icon-button matSuffix (click)="clear()" *ngIf="configuration && !selection">
        <natural-icon name="undo"></natural-icon>
    </button>

</mat-form-field>
<div class="hide">{{formCtrl.value ? formCtrl.value : (configuration ? configuration.display : placeholder)}}</div>
