<!-- eslint-disable @angular-eslint/template/cyclomatic-complexity -->
@if (menu && !disabled) {
    <div class="menu-container">
        <div class="menu">
            @if (save$.observed) {
                <button mat-icon-button i18n-matTooltip matTooltip="Enregistrer" (click)="save$.next()">
                    <mat-icon fontIcon="save" />
                </button>
            }
            <mat-button-toggle-group hideMultipleSelectionIndicator multiple>
                @if (menu.toggleStrong) {
                    <mat-button-toggle
                        i18n-matTooltip
                        matTooltip="Gras"
                        [disabled]="menu.toggleStrong.disabled"
                        [checked]="menu.toggleStrong.active"
                        (click)="run($event, 'toggleStrong')"
                    >
                        <mat-icon fontIcon="format_bold" />
                    </mat-button-toggle>
                }
                @if (menu.toggleEm) {
                    <mat-button-toggle
                        i18n-matTooltip
                        matTooltip="Italique"
                        [disabled]="menu.toggleEm.disabled"
                        [checked]="menu.toggleEm.active"
                        (click)="run($event, 'toggleEm')"
                    >
                        <mat-icon fontIcon="format_italic" />
                    </mat-button-toggle>
                }
                @if (menu.toggleCode) {
                    <mat-button-toggle
                        i18n-matTooltip
                        matTooltip="Code"
                        [disabled]="menu.toggleCode.disabled"
                        [checked]="menu.toggleCode.active"
                        (click)="run($event, 'toggleCode')"
                    >
                        <mat-icon fontIcon="code" />
                    </mat-button-toggle>
                }
                @if (menu.toggleLink) {
                    <mat-button-toggle
                        i18n-matTooltip
                        matTooltip="Insérer un lien..."
                        [disabled]="menu.toggleLink.disabled"
                        [checked]="menu.toggleLink.active"
                        (click)="run($event, 'toggleLink')"
                    >
                        <mat-icon fontIcon="insert_link" />
                    </mat-button-toggle>
                }
                @if (menu.textColor) {
                    <mat-button-toggle
                        i18n-matTooltip
                        matTooltip="Couleur du texte..."
                        [disabled]="menu.textColor.disabled"
                        [checked]="menu.textColor.active"
                        (click)="run($event, 'textColor')"
                    >
                        <mat-icon fontIcon="format_color_text" />
                    </mat-button-toggle>
                }
            </mat-button-toggle-group>
            <button mat-button [matMenuTriggerFor]="blockMenu">
                <span i18n>Type</span>
                <mat-icon fontIcon="arrow_drop_down" />
            </button>
            <mat-menu #blockMenu="matMenu">
                @if (menu.makeParagraph) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.makeParagraph.disabled"
                        (click)="run($event, 'makeParagraph')"
                        >Paragraphe
                    </button>
                }
                @if (menu.makeCodeBlock) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.makeCodeBlock.disabled"
                        (click)="run($event, 'makeCodeBlock')"
                        >Code
                    </button>
                }
                @if (menu.makeHead1) {
                    <button mat-menu-item i18n [disabled]="menu.makeHead1.disabled" (click)="run($event, 'makeHead1')"
                        >Titre 1
                    </button>
                }
                @if (menu.makeHead2) {
                    <button mat-menu-item i18n [disabled]="menu.makeHead2.disabled" (click)="run($event, 'makeHead2')"
                        >Titre 2
                    </button>
                }
                @if (menu.makeHead3) {
                    <button mat-menu-item i18n [disabled]="menu.makeHead3.disabled" (click)="run($event, 'makeHead3')"
                        >Titre 3
                    </button>
                }
                @if (menu.makeHead4) {
                    <button mat-menu-item i18n [disabled]="menu.makeHead4.disabled" (click)="run($event, 'makeHead4')"
                        >Titre 4
                    </button>
                }
                @if (menu.makeHead5) {
                    <button mat-menu-item i18n [disabled]="menu.makeHead5.disabled" (click)="run($event, 'makeHead5')"
                        >Titre 5
                    </button>
                }
                @if (menu.makeHead6) {
                    <button mat-menu-item i18n [disabled]="menu.makeHead6.disabled" (click)="run($event, 'makeHead6')"
                        >Titre 6
                    </button>
                }
                @if (menu.blockClass || menu.blockId) {
                    <mat-divider />
                }
                @if (menu.blockClass) {
                    <button mat-menu-item i18n [disabled]="menu.blockClass.disabled" (click)="run($event, 'blockClass')"
                        >Classe...
                    </button>
                }
                @if (menu.blockId) {
                    <button i18n mat-menu-item [disabled]="menu.blockId.disabled" (click)="run($event, 'blockId')"
                        >ID...
                    </button>
                }
            </mat-menu>
            @if (menu.addColumnBefore) {
                <button mat-button [matMenuTriggerFor]="tableMenu">
                    <span i18n>Tableau</span>
                    <mat-icon fontIcon="arrow_drop_down" />
                </button>
            }
            <mat-menu #tableMenu="matMenu">
                @if (menu.insertTable) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.insertTable.disabled"
                        (click)="run($event, 'insertTable')"
                        >Insérer un tableau
                    </button>
                }
                @if (menu.deleteTable) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.deleteTable.disabled"
                        (click)="run($event, 'deleteTable')"
                        >Supprimer le tableau
                    </button>
                }
                @if (menu.mergeCells) {
                    <button mat-menu-item i18n [disabled]="menu.mergeCells.disabled" (click)="run($event, 'mergeCells')"
                        >Fusionner les cellules
                    </button>
                }
                @if (menu.splitCell) {
                    <button mat-menu-item i18n [disabled]="menu.splitCell.disabled" (click)="run($event, 'splitCell')"
                        >Scinder les cellules
                    </button>
                }
                @if (menu.cellBackgroundColor) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.cellBackgroundColor.disabled"
                        (click)="run($event, 'cellBackgroundColor')"
                        >Couleur de fond...
                    </button>
                }
                @if (menu.tableClass) {
                    <button mat-menu-item i18n [disabled]="menu.tableClass.disabled" (click)="run($event, 'tableClass')"
                        >Classe...
                    </button>
                }
                @if (menu.tableId) {
                    <button i18n mat-menu-item [disabled]="menu.tableId.disabled" (click)="run($event, 'tableId')"
                        >ID...
                    </button>
                }
                <mat-divider />
                @if (menu.addColumnBefore) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.addColumnBefore.disabled"
                        (click)="run($event, 'addColumnBefore')"
                        >Insérer une colonne avant
                    </button>
                }
                @if (menu.addColumnAfter) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.addColumnAfter.disabled"
                        (click)="run($event, 'addColumnAfter')"
                        >Insérer une colonne après
                    </button>
                }
                @if (menu.deleteColumn) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.deleteColumn.disabled"
                        (click)="run($event, 'deleteColumn')"
                        >Supprimer la colonne
                    </button>
                }
                <mat-divider />
                @if (menu.addRowBefore) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.addRowBefore.disabled"
                        (click)="run($event, 'addRowBefore')"
                        >Insérer une ligne avant
                    </button>
                }
                @if (menu.addRowAfter) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.addRowAfter.disabled"
                        (click)="run($event, 'addRowAfter')"
                        >Insérer une ligne après
                    </button>
                }
                @if (menu.deleteRow) {
                    <button mat-menu-item i18n [disabled]="menu.deleteRow.disabled" (click)="run($event, 'deleteRow')"
                        >Supprimer la ligne
                    </button>
                }
                <mat-divider />
                @if (menu.toggleHeaderColumn) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.toggleHeaderColumn.disabled"
                        (click)="run($event, 'toggleHeaderColumn')"
                        >Entête de colonne
                    </button>
                }
                @if (menu.toggleHeaderRow) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.toggleHeaderRow.disabled"
                        (click)="run($event, 'toggleHeaderRow')"
                        >Entête de ligne
                    </button>
                }
                @if (menu.toggleHeaderCell) {
                    <button
                        mat-menu-item
                        i18n
                        [disabled]="menu.toggleHeaderCell.disabled"
                        (click)="run($event, 'toggleHeaderCell')"
                        >Entête de cellule
                    </button>
                }
            </mat-menu>
            @if (imageUploader()) {
                <button
                    mat-icon-button
                    naturalFileDrop
                    i18n-matTooltip
                    matTooltip="Insérer une image"
                    [accept]="commonImageMimeTypes"
                    [selectable]="true"
                    [broadcast]="false"
                    (fileChange)="upload($event)"
                >
                    <mat-icon fontIcon="insert_photo" />
                </button>
            }
            @if (menu.alignLeft) {
                <mat-button-toggle-group hideSingleSelectionIndicator>
                    @if (menu.alignLeft) {
                        <mat-button-toggle
                            i18n-matTooltip
                            matTooltip="Aligner gauche"
                            [disabled]="menu.alignLeft.disabled"
                            [checked]="menu.alignLeft.active"
                            (click)="run($event, 'alignLeft')"
                        >
                            <mat-icon fontIcon="format_align_left" />
                        </mat-button-toggle>
                    }
                    @if (menu.alignCenter) {
                        <mat-button-toggle
                            i18n-matTooltip
                            matTooltip="Centrer"
                            [disabled]="menu.alignCenter.disabled"
                            [checked]="menu.alignCenter.active"
                            (click)="run($event, 'alignCenter')"
                        >
                            <mat-icon fontIcon="format_align_center" />
                        </mat-button-toggle>
                    }
                    @if (menu.alignRight) {
                        <mat-button-toggle
                            i18n-matTooltip
                            matTooltip="Aligner droite"
                            [disabled]="menu.alignRight.disabled"
                            [checked]="menu.alignRight.active"
                            (click)="run($event, 'alignRight')"
                        >
                            <mat-icon fontIcon="format_align_right" />
                        </mat-button-toggle>
                    }
                    @if (menu.alignJustify) {
                        <mat-button-toggle
                            i18n-matTooltip
                            matTooltip="Justifier"
                            [disabled]="menu.alignJustify.disabled"
                            [checked]="menu.alignJustify.active"
                            (click)="run($event, 'alignJustify')"
                        >
                            <mat-icon fontIcon="format_align_justify" />
                        </mat-button-toggle>
                    }
                </mat-button-toggle-group>
            }
            @if (menu.undo) {
                <button
                    mat-icon-button
                    i18n-matTooltip
                    matTooltip="Annuler"
                    [disabled]="menu.undo.disabled"
                    (click)="run($event, 'undo')"
                >
                    <mat-icon fontIcon="undo" />
                </button>
            }
            @if (menu.redo) {
                <button
                    mat-icon-button
                    i18n-matTooltip
                    matTooltip="Refaire"
                    [disabled]="menu.redo.disabled"
                    (click)="run($event, 'redo')"
                >
                    <mat-icon fontIcon="redo" />
                </button>
            }
            @if (menu.wrapBulletList && menu.wrapBulletList.show) {
                <button
                    mat-icon-button
                    i18n-matTooltip
                    matTooltip="Liste à puce"
                    [disabled]="menu.wrapBulletList.disabled"
                    (click)="run($event, 'wrapBulletList')"
                >
                    <mat-icon fontIcon="format_list_bulleted" />
                </button>
            }
            @if (menu.wrapOrderedList && menu.wrapOrderedList.show) {
                <button
                    mat-icon-button
                    i18n-matTooltip
                    matTooltip="Liste à numéro"
                    [disabled]="menu.wrapOrderedList.disabled"
                    (click)="run($event, 'wrapOrderedList')"
                >
                    <mat-icon fontIcon="format_list_numbered" />
                </button>
            }
            @if (menu.wrapBlockQuote && menu.wrapBlockQuote.show) {
                <button
                    mat-icon-button
                    i18n-matTooltip
                    matTooltip="Citation"
                    [disabled]="menu.wrapBlockQuote.disabled"
                    (click)="run($event, 'wrapBlockQuote')"
                >
                    <mat-icon fontIcon="format_quote" />
                </button>
            }
            @if (menu.joinUp && menu.joinUp.show) {
                <button
                    mat-icon-button
                    i18n-matTooltip
                    matTooltip="Fusionner avec l'élément du haut"
                    [disabled]="menu.joinUp.disabled"
                    (click)="run($event, 'joinUp')"
                >
                    <mat-icon fontIcon="move_up" />
                </button>
            }
            @if (menu.lift && menu.lift.show) {
                <button
                    mat-icon-button
                    i18n-matTooltip
                    matTooltip="Désindenter"
                    [disabled]="menu.lift.disabled"
                    (click)="run($event, 'lift')"
                >
                    <mat-icon fontIcon="format_indent_decrease" />
                </button>
            }
            @if (menu.selectParentNode && menu.selectParentNode.show) {
                <button
                    mat-icon-button
                    i18n-matTooltip
                    matTooltip="Sélectionner l'élément parent"
                    [disabled]="menu.selectParentNode.disabled"
                    (click)="run($event, 'selectParentNode')"
                >
                    <mat-icon fontIcon="select_all" />
                </button>
            }
        </div>
    </div>
}
<div #editor class="editor-container"></div>
